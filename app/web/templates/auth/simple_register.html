{% extends "layouts/base.html" %}

{% block title %}Register{% endblock %}

{% block auth_content %}
<div class="card card-outline card-primary">
  <div class="card-header text-center">
    <a href="{{ url_for('main.home') }}" class="link-dark text-center link-offset-2 link-opacity-100 link-opacity-50-hover">
      <h1 class="mb-0"><b>Product</b>Insights</h1>
    </a>
    <p class="login-box-msg">Register to start analyzing content across platforms</p>
  </div>
  <div class="card-body">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    
    <form method="POST" action="{{ url_for('auth.register') }}">
      <!-- Username Field -->
      <div class="input-group mb-3">
        <input type="text" class="form-control" name="username" placeholder="Username" required>
        <div class="input-group-text">
          <span class="bi bi-person"></span>
        </div>
      </div>
      
      <!-- Email Field -->
      <div class="input-group mb-3">
        <input type="email" class="form-control" name="email" placeholder="Email" required>
        <div class="input-group-text">
          <span class="bi bi-envelope"></span>
        </div>
      </div>
      
      <!-- Password Field -->
      <div class="input-group mb-3">
        <input type="password" class="form-control" name="password" placeholder="Password" required>
        <div class="input-group-text">
          <span class="bi bi-lock-fill"></span>
        </div>
      </div>
      
      <!-- Submit Button -->
      <div class="d-grid gap-2">
        <button type="submit" class="btn btn-primary">Register</button>
      </div>
    </form>

    <p class="mb-0 mt-3 text-center">
      <a href="{{ url_for('auth.login') }}">
        Already have an account? Sign in here
      </a>
    </p>
  </div>
</div>
{% endblock %}

{% block additional_js %}
<script>
  // Auto-focus on first form field
  document.addEventListener('DOMContentLoaded', function() {
    const firstInput = document.querySelector('input[type="text"]');
    if (firstInput) {
      firstInput.focus();
    }
  });
</script>
{% endblock %}
